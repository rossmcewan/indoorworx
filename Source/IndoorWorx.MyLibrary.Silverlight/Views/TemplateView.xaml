<UserControl x:Class="IndoorWorx.MyLibrary.Views.TemplateView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="clr-namespace:IndoorWorx.MyLibrary.Converters"             
    xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation" 
    xmlns:uriMapper="clr-namespace:System.Windows.Navigation;assembly=System.Windows.Controls.Navigation"  
    xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
    xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"             
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400" >
    <UserControl.Resources>
        <converters:TemplateOperationToTextConverter x:Key="TemplateOperationToTextConverter"/>
    </UserControl.Resources>
    <toolkit:DataForm AutoEdit="True" AutoGenerateFields="False" CurrentItem="{Binding Template}">
        <toolkit:DataForm.EditTemplate>
            <DataTemplate>
                <StackPanel>
                    <toolkit:DataField LabelPosition="Top" Label="{Binding MyLibraryResources.TitleLabel, Source={StaticResource MyLibraryResources}}">
                        <TextBox Text="{Binding Title, Mode=TwoWay}"/>
                    </toolkit:DataField>
                    <toolkit:DataField LabelPosition="Top" Label="{Binding MyLibraryResources.DescriptionLabel, Source={StaticResource MyLibraryResources}}">
                        <TextBox Text="{Binding Description, Mode=TwoWay}"/>
                    </toolkit:DataField>
                    <toolkit:DataField LabelPosition="Top" Label="{Binding MyLibraryResources.DurationLabel, Source={StaticResource MyLibraryResources}}">
                        <toolkit:TimeUpDown Value="{Binding Duration, Mode=TwoWay}"/>
                    </toolkit:DataField>
                    <toolkit:DataField LabelPosition="Top" Label="{Binding MyLibraryResources.IntervalsLabel, Source={StaticResource MyLibraryResources}}">
                        <StackPanel Orientation="Horizontal">
                            <toolkit:DataForm CommandButtonsVisibility="All" ItemsSource="{Binding Intervals, Mode=TwoWay}" CurrentItem="{Binding SelectedInterval, Mode=TwoWay}" AutoGenerateFields="False">
                                <toolkit:DataForm.EditTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <toolkit:DataField LabelPosition="Top" Label="{Binding MyLibraryResources.TitleLabel, Source={StaticResource MyLibraryResources}}">
                                                <TextBox Text="{Binding Title, Mode=TwoWay}"/>
                                            </toolkit:DataField>
                                            <toolkit:DataField LabelPosition="Top" Label="{Binding MyLibraryResources.DescriptionLabel, Source={StaticResource MyLibraryResources}}">
                                                <TextBox Text="{Binding Description, Mode=TwoWay}"/>
                                            </toolkit:DataField>
                                            <toolkit:DataField LabelPosition="Top" Label="{Binding MyLibraryResources.DurationLabel, Source={StaticResource MyLibraryResources}}">
                                                <toolkit:TimeUpDown Value="{Binding Duration, Mode=TwoWay}"/>
                                            </toolkit:DataField>
                                        </StackPanel>
                                    </DataTemplate>
                                </toolkit:DataForm.EditTemplate>
                            </toolkit:DataForm>
                            <sdk:DataGrid ItemsSource="{Binding Intervals, Mode=TwoWay}" AutoGenerateColumns="False" SelectedItem="{Binding SelectedInterval, Mode=TwoWay}">
                                <sdk:DataGrid.Columns>
                                    <sdk:DataGridTextColumn Header="{Binding MyLibraryResources.TitleLabel, Source={StaticResource MyLibraryResources}}" Binding="{Binding Title, Mode=TwoWay}"/>
                                </sdk:DataGrid.Columns>
                            </sdk:DataGrid>
                        </StackPanel>
                    </toolkit:DataField>
                </StackPanel>
            </DataTemplate>
        </toolkit:DataForm.EditTemplate>
    </toolkit:DataForm>
    <!--<Grid x:Name="LayoutRoot" Style="{StaticResource LayoutRootGridStyle}">
        <Border x:Name="BackgroundBorder" Style="{StaticResource BackgroundBorderStyle}"/>

        <Border x:Name="ContentBorder" Style="{StaticResource ContentBorderStyle}">
            <Grid Style="{StaticResource ContentGridStyle}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>            
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <sdk:Label Content="TITLE" Margin="5"/>
                <TextBox Grid.Column="1" Width="200" Margin="5"/>
                <sdk:DescriptionViewer Description="The title" Grid.Column="2" Margin="5"/>
            </Grid>
        </Border>

        <Grid x:Name="NavigationOuterGrid" Style="{StaticResource NavigationOuterGridStyle}">
            <Grid x:Name="NavigationGrid" Style="{StaticResource NavigationGridStyle}">

                <Border x:Name="BrandingBorder" Style="{StaticResource BrandingBorderStyle}">
                    <StackPanel x:Name="BrandingStackPanel" Style="{StaticResource BrandingStackPanelStyle}">
                        <ContentControl Style="{StaticResource LogoIcon}"/>
                        <TextBlock x:Name="settingsTextBlock" Style="{StaticResource SettingsNameStyle}" 
                               Text="{Binding ApplicationStrings.ApplicationName, Source={StaticResource ResourceWrapper}}"/>
                    </StackPanel>
                </Border>

                <Border x:Name="LinksBorder" Style="{StaticResource LinksBorderStyle}">
                    <StackPanel x:Name="LinksStackPanel" Style="{StaticResource LinksStackPanelStyle}">
                        <TextBlock Text="{Binding TemplateOperation, Mode=OneWay, Converter={StaticResource TemplateOperationToTextConverter}}" Style="{StaticResource LinkTextBlockStyle}"/>
                    </StackPanel>
                </Border>
            </Grid>
            <Button Content="Cancel" Command="{Binding CancelCommand, Mode=OneWay}" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="40"/>
        </Grid>
        <HyperlinkButton Command="{Binding CancelCommand}" Margin="-10" VerticalAlignment="Top" HorizontalAlignment="Left">
            <Image Source="/IndoorWorx.MyLibrary.Silverlight;component/Images/back.png" Width="50"  />
        </HyperlinkButton>                
    </Grid>-->
</UserControl>